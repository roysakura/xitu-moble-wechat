webpackJsonp([22],{155:/*!*********************************************!*\
  !*** ./src/components/user/login/Login.vue ***!
  \*********************************************/
function(e,t,s){function n(e){s(/*! !../../../../~/_extract-text-webpack-plugin@2.1.0@extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!vue-style-loader!css-loader?{"minimize":true,"sourceMap":true}!../../../../~/_vue-loader@12.2.1@vue-loader/lib/style-compiler/index?{"vue":true,"id":"data-v-798cffe7","scoped":true,"hasInlineConfig":true}!../../../../~/_vue-loader@12.2.1@vue-loader/lib/selector?type=styles&index=0!./Login.vue */440)}var i=s(/*! ../../../../~/_vue-loader@12.2.1@vue-loader/lib/component-normalizer */39)(s(/*! !babel-loader!../../../../~/_vue-loader@12.2.1@vue-loader/lib/selector?type=script&index=0!./Login.vue */347),s(/*! !../../../../~/_vue-loader@12.2.1@vue-loader/lib/template-compiler/index?{"id":"data-v-798cffe7"}!../../../../~/_vue-loader@12.2.1@vue-loader/lib/selector?type=template&index=0!./Login.vue */522),n,"data-v-798cffe7",null);e.exports=i.exports},169:/*!************************!*\
  !*** ./src/api/api.js ***!
  \************************/
function(e,t,s){var n,i,o,n,i,o;!function(s,a){i=[t],n=a,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(t){"use strict";!function(s,a){i=[t],n=a,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={GETCODE:"/sendcode/",REG:"/signup/",LOGIN:"/api-token-auth/",TOKENVERIFY:"/api-token-verify/",RESETCODE:"/requestPasswordResetBySmsCode/",RERESTPASSWORD:"/passwordrest/",NEWS:"/api1.0/articles/",ARTICLES:"/api1.0/articles/",CATEGORYS:"/api1.0/categorys/",ARTICLESDETAIL:"/api1.0/articles/",COMMENTNEWS:"/api1.0/comments/",COLLECTIONS:"/api1.0/collections/",NEWSVIEW:"/api1.0/views/",NEWSZAN:"/api1.0/likes/",COMMENTREPLY:"/api1.0/replys/",NEWSCOMMENTINFOS:"/api1.0/articles",REPLYTOREPLY:"/api1.0/replys/",JUBAONEWS:"/api1.0/informs/",ONECOMMENTS:"/api1.0/articles",USERINFOS:"/api1.0/profiles/",USERPLOADSINFOS:"/api1.0/profiles/",UPLOADAVATORINFOS:"/api1.0/profiles/",TAGS:"/api1.0/tags/",MYTIEZI:"/api1.0/users/",ADS:"/api1.0/ads/",SUGGESTBACK:"/api1.0/suggestions/",USERCOMMENTS:"/api1.0/usercomments/",USERJIFEN:"/api1.0/credititems/",TOPBANNER:"/api1.0/articleranks/",FILES:"/api1.0/files/",FILESDETAIL:"/api1.0/filecredits/",SEARCH:"api1.0/search/",SEARCHCATEGORY:"api1.0/search/lists/",SIGN:"/api1.0/signatures/",AllLook:"api1.0/articleorders/"}})})},189:/*!*****************************************!*\
  !*** ./src/assets/js/customValidate.js ***!
  \*****************************************/
function(e,t,s){var n,i,o,n,i,o;!function(a,r){i=[t,s(/*! vee-validate */12)],n=r,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(t){"use strict";!function(a,r){i=[t,s(/*! vee-validate */12)],n=r,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),t.Validator.extend("phone",{messages:{zh_CN:function(e){return"手机号码输入不正确"}},validate:function(e){return 11==e.length&&/^((13|14|15|17|18)[0-9]{1}\d{8})$/.test(e)}}),t.Validator.extend("myPhoneNumeric",{messages:{zh_CN:function(e){return"手机号码只能是数字"}},validate:function(e){return/^([0-9]+)$/.test(e)}}),t.Validator.extend("myNumeric",{messages:{zh_CN:function(e){return"验证码只能是数字"}},validate:function(e){return/^([0-9]+)$/.test(e)}}),t.Validator.extend("code",{messages:{zh_CN:function(e){return"验证码必须4位或6位"}},validate:function(e){return/^(\d{4}){1}(\d{2})?$/.test(e)}}),t.Validator.extend("pwd",{messages:{zh_CN:function(e){return"密码必须是6到13位数字或字母组成"}},validate:function(e){return/^[a-zA-Z0-9]{6,13}$/.test(e)}}),e.default=t.Validator})})},347:/*!************************************************************************************************************************************************************!*\
  !*** ./~/_babel-loader@6.4.1@babel-loader/lib!./~/_vue-loader@12.2.1@vue-loader/lib/selector.js?type=script&index=0!./src/components/user/login/Login.vue ***!
  \************************************************************************************************************************************************************/
function(e,t,s){(function(n){var i,o,a;!function(n,r){o=[t,s(/*! ../../../assets/js/customValidate */189),s(/*! ../../../api/api */169),s(/*! ../../../api/login */451)],i=r,void 0!==(a="function"==typeof i?i.apply(t,o):i)&&(e.exports=a)}(0,function(e,t,s,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var a=(o(t),o(s));e.default={data:function(){return{phone:"",pwd:"",token:"",isShowLogin:!0}},mounted:function(){this.isweixin()?this.checkUser():(this.makeFocus(),this.changeInStyle(),this.switchClose())},methods:{checkUser:function(){var e=encodeURIComponent(window.location.href),t="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxb8b90178cdd55ad0&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo&state=123&#wechat_redirect";if(null!==sessionStorage.getItem("code")&&null!==sessionStorage.getItem("state"))this.getUserInfo(sessionStorage.getItem("code"));else if(window.location.href.indexOf("code")>0){var s=this.getQueryString("code"),n=this.getQueryString("state");null!==s&&null!==n&&(sessionStorage.setItem("code",s),sessionStorage.setItem("state",n),this.getUserInfo(s))}else window.location=t},getUserInfo:function(e){var t=this;(0,i.dealWeiXinLogin)("/api-token-auth/",e).then(function(e){t.initAutoLogin(e),t.$store.dispatch("hideLoading")},function(e){50002===parseInt(e.error_code)&&t.showMsg("登录前请先关注磁易购公众号!"),t.$store.dispatch("hideLoading")})},initAutoLogin:function(e){this.isShowLogin=!1,this.initLogin(e)},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),s=window.location.search.substr(1).match(t);return null!==s?decodeURIComponent(s[2]):null},isweixin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},switchClose:function(){n("#user-close").on("click",function(){n("#phone-input").val(""),n(this).hide()}),n("#phone-input").bind("input propertychange",function(){n("#user-close").show()}),n("#pwd-close").on("click",function(){n("#user-pwd").val(""),n(this).hide()}),n("#user-pwd").bind("input propertychange",function(){n("#pwd-close").show()})},checkLog:function(e){var t=this;if(""===t.phone||""===t.pwd)return void this.showMsg("手机号，密码不能为空!");this.$validator.validateAll().then(function(e){e&&(0,i.dealLogin)(a.default.LOGIN,t.phone,t.pwd).then(function(e){200===e.status&&null!==e.data?t.initLogin(e):t.$store.dispatch("hideLoading")},function(e){console.log("登录失败返回的信息:",e),3e4===parseInt(e.errorcode[0])&&t.showMsg("电话号码错误!"),30001===parseInt(e.errorcode[0])&&t.showMsg("密码错误!"),t.$store.dispatch("hideLoading")})},function(e){t.showMsg("请填写完正确的信息!"),t.$store.dispatch("hideLoading")}),e.preventDefault()},initLogin:function(e){this.showMsg("恭喜您，登录成功!"),this.token=e.data.token,localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.user_id),localStorage.setItem("uName",e.data.user_name),localStorage.setItem("login",!1),this.$store.dispatch("showLogin",!1),this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUserId",e.data.user_id);var t=decodeURIComponent(this.$route.query.redirect||"/");this.$router.push({path:t})},dealErr:function(){this.$store.dispatch("hideLoading"),this.showMsg("登录失败，请重试!")},showMsg:function(e){this.$toast({message:e,duration:2e3})},makeFocus:function(){var e=n(".u-name")[0];n(".login_layer")[0];e.focus(),e.focus&&n(e).css({border:"2px solid #20a0ff"})},changeInStyle:function(){var e=n(".login-common");n(e).each(function(e,t){n(t).focus(function(){n(this).css({border:"2px solid #20a0ff"})}),n(t).blur(function(){n(this).css({border:"1px solid #d6d6d6"})})})},goRegisterPage:function(e){this.$router.push({path:"/register",replace:!0}),e.preventDefault()},goFindPaswdPage:function(e){this.$router.push({path:"/forgetpwd",replace:!0}),e.preventDefault()}}}})}).call(t,s(/*! jquery */11))},440:/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./~/_extract-text-webpack-plugin@2.1.0@extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{"minimize":true,"sourceMap":true}!./~/_vue-loader@12.2.1@vue-loader/lib/style-compiler?{"vue":true,"id":"data-v-798cffe7","scoped":true,"hasInlineConfig":true}!./~/_vue-loader@12.2.1@vue-loader/lib/selector.js?type=styles&index=0!./src/components/user/login/Login.vue ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
function(e,t){},451:/*!**************************!*\
  !*** ./src/api/login.js ***!
  \**************************/
function(e,t,s){var n,i,o,n,i,o;!function(a,r){i=[t,s(/*! babel-runtime/core-js/promise */10),s(/*! axios */9)],n=r,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(t){"use strict";!function(a,r){i=[t,s(/*! babel-runtime/core-js/promise */10),s(/*! axios */9)],n=r,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(e,t,s){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,s){return r.default.post(e,{mobile:t,password:s,role_name:1}).then(function(e){return a.default.resolve(e)},function(e){return a.default.reject(e)})}function o(e,t){return r.default.post(e,{code:t,mobile:18389379733,password:"r43deqwcdcds",role_name:1}).then(function(e){return a.default.resolve(e)},function(e){return a.default.reject(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.dealLogin=i,e.dealWeiXinLogin=o;var a=n(t),r=n(s)})})},468:/*!******************************************!*\
  !*** ./src/assets/images/ec_logo@3x.png ***!
  \******************************************/
function(e,t,s){e.exports=s.p+"static/images/ec_logo@3x.77bd36c.png"},522:/*!******************************************************************************************************************************************************************************************************!*\
  !*** ./~/_vue-loader@12.2.1@vue-loader/lib/template-compiler?{"id":"data-v-798cffe7"}!./~/_vue-loader@12.2.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/user/login/Login.vue ***!
  \******************************************************************************************************************************************************************************************************/
function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowLogin,expression:"isShowLogin"}],staticClass:"login-layer"},[e._m(0),e._v(" "),s("main",{staticClass:"login-main"},[e._m(1),e._v(" "),s("section",{staticClass:"login-box"},[s("div",{staticClass:"user-name-box user-name-box2"},[s("i",{staticClass:"user-icon"}),e._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|myPhoneNumeric|phone",expression:"'required|myPhoneNumeric|phone'"},{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"u-name login-common",class:{input:!0,danger:e.errors.has("phone")},attrs:{type:"tel",placeholder:"请输入手机号码",name:"phone",id:"phone-input"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("phone"),expression:"errors.has('phone')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("phone")))]),e._v(" "),s("i",{staticClass:"user-close-icon",attrs:{id:"user-close"}})]),e._v(" "),s("div",{staticClass:"user-name-box user-pawd-box2"},[e._m(2),e._v(" "),s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|pwd",expression:"'required|pwd'"},{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],staticClass:"u-password login-common",class:{input:!0,danger:e.errors.has("pwd")},attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off",name:"pwd",id:"user-pwd"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("pwd"),expression:"errors.has('pwd')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("pwd")))]),e._v(" "),s("i",{staticClass:"user-close-icon",attrs:{id:"pwd-close"}})]),e._v(" "),s("div",{staticClass:"user-name-box user-login-btn"},[s("a",{staticClass:"user-login-btnc",on:{click:function(t){e.checkLog(t)}}},[e._v("登录")])]),e._v(" "),s("div",{staticClass:"user-name-box forget-paswd"},[s("a",{staticClass:"reg-quick-btn",on:{click:function(t){e.goRegisterPage(t)}}},[e._v("快速注册")]),e._v(" "),s("a",{staticClass:"forget-paswd-btn",on:{click:function(t){e.goFindPaswdPage(t)}}},[e._v("忘记密码")])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"login-mainheader-bar clearfix"},[s("a",{staticClass:"login-back-btn",attrs:{onclick:"window.history.go(-1)"}}),e._v(" "),s("h2",{staticClass:"login-title"},[e._v("登录磁易购社区")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"login-se-logo"},[n("img",{staticClass:"login-se-img",attrs:{src:s(/*! ../../../assets/images/ec_logo@3x.png */468),alt:"磁易购"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"u-passwd-iconbox"},[s("i",{staticClass:"pwd-icon-top"}),e._v(" "),s("i",{staticClass:"pwd-icon-bottom"})])}]}}});
//# sourceMappingURL=22.af63bac3d26e11f8f059.js.map