webpackJsonp([18],{161:/*!*******************************************************!*\
  !*** ./src/components/user/userinfo/PersonalData.vue ***!
  \*******************************************************/
function(e,t,s){function a(e){s(/*! !../../../../~/_extract-text-webpack-plugin@2.1.0@extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!vue-style-loader!css-loader?{"minimize":true,"sourceMap":true}!../../../../~/_vue-loader@12.2.1@vue-loader/lib/style-compiler/index?{"vue":true,"id":"data-v-7b677ac4","scoped":true,"hasInlineConfig":true}!../../../../~/_vue-loader@12.2.1@vue-loader/lib/selector?type=styles&index=0!./PersonalData.vue */441)}var n=s(/*! ../../../../~/_vue-loader@12.2.1@vue-loader/lib/component-normalizer */39)(s(/*! !babel-loader!../../../../~/_vue-loader@12.2.1@vue-loader/lib/selector?type=script&index=0!./PersonalData.vue */353),s(/*! !../../../../~/_vue-loader@12.2.1@vue-loader/lib/template-compiler/index?{"id":"data-v-7b677ac4"}!../../../../~/_vue-loader@12.2.1@vue-loader/lib/selector?type=template&index=0!./PersonalData.vue */523),a,"data-v-7b677ac4",null);e.exports=n.exports},169:/*!************************!*\
  !*** ./src/api/api.js ***!
  \************************/
function(e,t,s){var a,n,o,a,n,o;!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(t){"use strict";!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={GETCODE:"/sendcode/",REG:"/signup/",LOGIN:"/api-token-auth/",TOKENVERIFY:"/api-token-verify/",RESETCODE:"/requestPasswordResetBySmsCode/",RERESTPASSWORD:"/passwordrest/",NEWS:"/api1.0/articles/",ARTICLES:"/api1.0/articles/",CATEGORYS:"/api1.0/categorys/",ARTICLESDETAIL:"/api1.0/articles/",COMMENTNEWS:"/api1.0/comments/",COLLECTIONS:"/api1.0/collections/",NEWSVIEW:"/api1.0/views/",NEWSZAN:"/api1.0/likes/",COMMENTREPLY:"/api1.0/replys/",NEWSCOMMENTINFOS:"/api1.0/articles",REPLYTOREPLY:"/api1.0/replys/",JUBAONEWS:"/api1.0/informs/",ONECOMMENTS:"/api1.0/articles",USERINFOS:"/api1.0/profiles/",USERPLOADSINFOS:"/api1.0/profiles/",UPLOADAVATORINFOS:"/api1.0/profiles/",TAGS:"/api1.0/tags/",MYTIEZI:"/api1.0/users/",ADS:"/api1.0/ads/",SUGGESTBACK:"/api1.0/suggestions/",USERCOMMENTS:"/api1.0/usercomments/",USERJIFEN:"/api1.0/credititems/",TOPBANNER:"/api1.0/articleranks/",FILES:"/api1.0/files/",FILESDETAIL:"/api1.0/filecredits/",SEARCH:"api1.0/search/",SEARCHCATEGORY:"api1.0/search/lists/",SIGN:"/api1.0/signatures/",AllLook:"api1.0/articleorders/"}})})},172:/*!**************************!*\
  !*** ./src/utils/log.js ***!
  \**************************/
function(e,t,s){var a,n,o,a,n,o;!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(t){"use strict";!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t={flag:!0,printLog:function(){if(this.flag){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];console.log(t)}}};e.default=t})})},199:/*!****************************!*\
  !*** ./src/utils/times.js ***!
  \****************************/
function(e,t,s){var a,n,o,a,n,o;!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(t){"use strict";!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){var s=new Date(e),a=s.getFullYear(),n=s.getMonth()+1,o=s.getDate(),i=s.getHours(),r=s.getMinutes(),l=s.getSeconds();return t?a+"-"+n+"-"+o+" "+i+":"+r+":"+l:a+"-"+n+"-"+o}})})},353:/*!**********************************************************************************************************************************************************************!*\
  !*** ./~/_babel-loader@6.4.1@babel-loader/lib!./~/_vue-loader@12.2.1@vue-loader/lib/selector.js?type=script&index=0!./src/components/user/userinfo/PersonalData.vue ***!
  \**********************************************************************************************************************************************************************/
function(e,t,s){var a,n,o;!function(i,r){n=[t,s(/*! ../../../utils/times */199),s(/*! ../../../api/api */169),s(/*! ../../../api/userinfo */458),s(/*! ../../../utils/check */462),s(/*! ../../../utils/log */172),s(/*! vuex */29)],a=r,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(e,t,s,a,n,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var l=r(t),c=r(s),u=(r(n),r(o));e.default={computed:(0,i.mapGetters)(["isShowLogin"]),data:function(){return{pickerValue:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),startDate:new Date((new Date).getFullYear()-60,0,1),endDate:new Date((new Date).getFullYear(),11,31),userDatas:{},personalInfo:{},userIcon:{},companys:"",isTouXiang:!1,images:""}},mounted:function(){this.getUserInfos(),this.showH(),this.userIcon.medium=localStorage.getItem("user-avatar"),this.userIcon.medium?this.isTouXiang=!0:this.isTouXiang=!1},methods:{showH:function(){this.isShowLogin=localStorage.getItem("login"),!1===this.isShowLogin?(localStorage.setItem("login",!1),this.$store.dispatch("showLogin",!1)):(localStorage.setItem("login",!0),this.$store.dispatch("showLogin",!0))},logout:function(e){window.localStorage.getItem("token");this.$toast({message:"成功退出",duration:2e3}),localStorage.removeItem("uPhoto"),localStorage.removeItem("uName"),localStorage.setItem("login",!0),this.$store.dispatch("showLogin",!0),this.$store.dispatch("clearToken"),this.$store.dispatch("clearUserId"),this.$router.replace("/index"),e.preventDefault()},getUserInfos:function(){var e=this;(0,a.getUser)(c.default.USERINFOS).then(function(t){e.initUserInfos(t)},function(t){e.hideUserInfo()})},initUserInfos:function(e){var t=this;200===e.status?(t.userDatas=e.data[0],t.personalInfo=e.data[0].personal_info,t.images=t.personalInfo.image.medium,console.log("_this.images:",t.images),t.personalInfo.avatar?t.isTouXiang=!0:t.isTouXiang=!1,u.default.printLog("获取到的用户信息是:",e),null!==e.data[0].company&&(t.companys=e.data[0].company.name),t.userIcon=this.personalInfo.image,localStorage.setItem("uName",this.personalInfo.name),localStorage.setItem("uPhoto",this.personalInfo.avatar),localStorage.setItem("uSign",this.personalInfo.signture),""!==t.personalInfo.birthday&&null!==t.personalInfo.birthday||(t.personalInfo.birthday="点击设置"),"m"===t.personalInfo.sex?t.personalInfo.sex="男":t.personalInfo.sex="女"):t.hideUserInfo()},hideUserInfo:function(){this.showMsg("获取用户信息失败，请重试"),this.$store.dispatch("hideLoading")},showMsg:function(e){this.$toast({message:e,duration:2e3})},goAvatarPage:function(){var e=this.personalInfo.avatar;localStorage.setItem("avatar",e),this.$router.push({path:"/setavatar",replace:!0})},open:function(e){this.$refs.picker.open(),e.preventDefault()},handleConfirm:function(){this.personalInfo.birthday=(0,l.default)(this.pickerValue,!1)},submitUserInfos:function(e){var t=this,s={name:t.personalInfo.name,sex:"男"===t.personalInfo.sex?"m":"f",birthday:"点击设置"!==t.personalInfo.birthday?this.personalInfo.birthday:null,signture:t.personalInfo.signture,wechat_number:t.personalInfo.wechat_number,avatar:localStorage.getItem("user-avatar")},n={name:t.companys};(0,a.changeUserInfo)(c.default.USERPLOADSINFOS,t.userDatas.qq,s,n).then(function(e){t.showUploadSuccessInfo(e.status)},function(e){t.showUploadFailInfo()}),e.preventDefault()},showUploadSuccessInfo:function(e){201===e?(this.showMsg("恭喜您,用户信息上传成功!"),this.$router.go(0)):this.showUploadFailInfo()},showUploadFailInfo:function(){this.$store.dispatch("hideLoading"),this.showMsg("上传用户信息失败，请重试!")}}}})},441:/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./~/_extract-text-webpack-plugin@2.1.0@extract-text-webpack-plugin/loader.js?{"omit":1,"remove":true}!./~/_vue-style-loader@3.0.1@vue-style-loader!./~/_css-loader@0.28.4@css-loader?{"minimize":true,"sourceMap":true}!./~/_vue-loader@12.2.1@vue-loader/lib/style-compiler?{"vue":true,"id":"data-v-7b677ac4","scoped":true,"hasInlineConfig":true}!./~/_vue-loader@12.2.1@vue-loader/lib/selector.js?type=styles&index=0!./src/components/user/userinfo/PersonalData.vue ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
function(e,t){},458:/*!*****************************!*\
  !*** ./src/api/userinfo.js ***!
  \*****************************/
function(e,t,s){var a,n,o,a,n,o;!function(i,r){n=[t,s(/*! babel-runtime/core-js/promise */10),s(/*! axios */9)],a=r,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(t){"use strict";!function(i,r){n=[t,s(/*! babel-runtime/core-js/promise */10),s(/*! axios */9)],a=r,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(e,t,s){function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return r.default.get(e).then(function(e){return i.default.resolve(e)},function(e){return i.default.reject(e)})}function o(e,t,s,a){return r.default.post(e,{qq:t,personal_info:s,company:a}).then(function(e){return i.default.resolve(e)},function(e){return i.default.reject(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.getUser=n,e.changeUserInfo=o;var i=a(t),r=a(s)})})},462:/*!****************************!*\
  !*** ./src/utils/check.js ***!
  \****************************/
function(e,t,s){var a,n,o,a,n,o;!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(t){"use strict";!function(s,i){n=[t],a=i,void 0!==(o="function"==typeof a?a.apply(t,n):a)&&(e.exports=o)}(0,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t={isQQ:function(e){return!!RegExp(/^[1-9][0-9]{4,9}$/).test(e)},isPhone:function(e){return!!RegExp(/^(0|86|17951)?(13[0-9]|15[012356789]|18[0-9]|14[57])[0-9]{8}$/).test(e)},isEmail:function(e){return!!RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(e)}};e.default=t})})},523:/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./~/_vue-loader@12.2.1@vue-loader/lib/template-compiler?{"id":"data-v-7b677ac4"}!./~/_vue-loader@12.2.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/user/userinfo/PersonalData.vue ***!
  \****************************************************************************************************************************************************************************************************************/
function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mine_info_layer"},[s("header",{staticClass:"mine-header-bar clearfix"},[s("a",{staticClass:"login-back-btn",attrs:{onclick:"window.history.go(-1);"}}),e._v(" "),s("h2",{staticClass:"login-title"},[e._v("个人资料")]),e._v(" "),s("a",{staticClass:"topbar-left",on:{click:function(t){e.submitUserInfos(t)}}},[e._v("保存")])]),e._v(" "),s("main",{staticClass:"mine-u-info",attrs:{id:"mine-data-layout"}},[s("section",{staticClass:"user-info-sec"},[e._m(0),e._v(" "),s("div",{staticClass:"u-photo-box",on:{click:function(t){e.goAvatarPage()}}},[s("img",{staticClass:"u-photo",class:{"u-photo-no":!e.isTouXiang},attrs:{src:e.images,alt:""}}),e._v(" "),s("i",{staticClass:"touxiang-arrow-right"})])]),e._v(" "),s("section",{staticClass:"user-info-sectwo"},[s("div",{staticClass:"u-name-box sex-box"},[s("span",{staticClass:"sex-title"},[e._v("名字")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.personalInfo.name,expression:"personalInfo.name"}],staticClass:"sex-setting",attrs:{placeholder:"点击设置"},domProps:{value:e.personalInfo.name},on:{input:function(t){t.target.composing||(e.personalInfo.name=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"sex-box"},[s("span",{staticClass:"sex-title"},[e._v("性别")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.personalInfo.sex,expression:"personalInfo.sex"}],staticClass:"sex-setting",attrs:{placeholder:"点击设置"},domProps:{value:e.personalInfo.sex},on:{input:function(t){t.target.composing||(e.personalInfo.sex=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"sex-box"},[s("span",{staticClass:"sex-title"},[e._v("生日")]),e._v(" "),s("a",{staticClass:"sex-setting",on:{click:function(t){e.open(t)}}},[e._v(e._s(e.personalInfo.birthday))])]),e._v(" "),s("div",{staticClass:"sex-box sing-box"},[s("span",{staticClass:"sex-title"},[e._v("签名")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.personalInfo.signture,expression:"personalInfo.signture"}],staticClass:"sex-setting",attrs:{type:"text",placeholder:"点击设置"},domProps:{value:e.personalInfo.signture},on:{input:function(t){t.target.composing||(e.personalInfo.signture=t.target.value)}}})])]),e._v(" "),s("section",{staticClass:"user-info-sectwo"},[s("div",{staticClass:"sex-box"},[s("span",{staticClass:"sex-title"},[e._v("公司")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.companys,expression:"companys"}],staticClass:"sex-setting",attrs:{type:"text",placeholder:"点击设置"},domProps:{value:e.companys},on:{input:function(t){t.target.composing||(e.companys=t.target.value)}}})]),e._v(" "),e._m(1),e._v(" "),s("div",{staticClass:"sex-box"},[s("span",{staticClass:"sex-title"},[e._v("qq")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userDatas.qq,expression:"userDatas.qq"}],staticClass:"sex-setting qq-setting",attrs:{type:"number",placeholder:"点击设置"},domProps:{value:e.userDatas.qq},on:{input:function(t){t.target.composing||(e.userDatas.qq=t.target.value)},blur:function(t){e.$forceUpdate()}}})]),e._v(" "),s("div",{staticClass:"sex-box sing-box"},[s("span",{staticClass:"sex-title"},[e._v("微信")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.personalInfo.wechat_number,expression:"personalInfo.wechat_number"}],staticClass:"sex-setting",attrs:{type:"text",placeholder:"点击设置"},domProps:{value:e.personalInfo.wechat_number},on:{input:function(t){t.target.composing||(e.personalInfo.wechat_number=t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"remember"},[s("mt-datetime-picker",{ref:"picker",attrs:{type:"date",startDate:e.startDate,endDate:e.endDate},on:{confirm:e.handleConfirm},model:{value:e.pickerValue,callback:function(t){e.pickerValue=t},expression:"pickerValue"}})],1),e._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:!e.isShowLogin,expression:"!isShowLogin"}],staticClass:"personal-info-item3"},[s("a",{staticClass:"btn-logout",on:{click:function(t){e.logout(t)}}},[e._v("退出当前账号")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"u-name-box touxiang-box"},[s("span",{staticClass:"touxiang-text"},[e._v("头像")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sex-box",staticStyle:{display:"none"}},[s("span",{staticClass:"sex-title"},[e._v("手机")]),e._v(" "),s("input",{staticClass:"sex-setting",attrs:{type:"tel",placeholder:"点击设置"}})])}]}}});
//# sourceMappingURL=18.4541744cdee863776091.js.map